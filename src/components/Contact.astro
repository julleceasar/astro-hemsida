<section id="contact" class="bg-gray-50 py-24 px-6">
  <div class="max-w-3xl mx-auto text-center">
    <!-- Rubrik -->
    <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">
      Kontakta mig
    </h2>

    <!-- Kort text -->
    <p class="text-lg text-gray-600 mb-10">
      Har du frågor eller vill boka ett samtal? Fyll i formuläret nedan så
      återkommer jag så snart som möjligt.
    </p>

    <!-- Formulär med Formspree -->
    <form
      action="https://formspree.io/f/xbdagokn"
      method="POST"
      class="space-y-6 text-left"
      id="contact-form"
    >
      <!-- dolda fält för Formspree -->
      <div>
        <label for="name" class="block text-sm font-medium text-gray-700 mb-1"
          >Namn</label
        >
        <input
          type="text"
          id="name"
          name="name"
          required
          placeholder="Ditt namn"
          class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 outline-none transition"
        />
      </div>

      <div>
        <label for="email" class="block text-sm font-medium text-gray-700 mb-1"
          >Email</label
        >
        <input
          type="email"
          id="email"
          name="email"
          required
          placeholder="Din e-post"
          class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 outline-none transition"
        />
      </div>

      <div>
        <label
          for="message"
          class="block text-sm font-medium text-gray-700 mb-1">Meddelande</label
        >
        <textarea
          id="message"
          name="message"
          rows="5"
          required
          placeholder="Skriv ditt meddelande här"
          class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 outline-none transition"
        ></textarea>
      </div>

      <div class="text-center">
        <button
          type="submit"
          class="cursor-pointer inline-flex items-center justify-center gap-2 px-8 py-3 rounded-xl bg-blue-600 text-white font-medium shadow-sm hover:shadow-md hover:scale-[1.03] transition transform duration-300"
        >
          Skicka meddelande
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="w-5 h-5"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
            stroke-width="2"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
          </svg>
        </button>
      </div>
    </form>

    <div
      id="thank-you"
      class="mt-6 text-center text-xl text-green-600 flex flex-col items-center hidden"
    >
      <svg
        class="w-[60px] h-[60px] text-green-600 dark:text-white"
        aria-hidden="true"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        fill="none"
        viewBox="0 0 24 24"
      >
        <path
          stroke="currentColor"
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M8.5 11.5 11 14l4-4m6 2a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"></path>
      </svg>
      <p>Tack! Ditt meddelande har skickats.</p>
      <p class="text-body text-base italic">
        Jag återkommer till dig så snart som möjligt.
      </p>
    </div>

    <!-- Alternativ kontaktinfo -->
    <div class="mt-12 text-gray-600 space-y-2 text-sm">
      <p>
        Email: <a
          href="mailto:webbklart@outlook.com"
          class="text-blue-600 hover:underline">webbklart@outlook.com</a
        >
      </p>
      <p>
        Telefon: <a
          href="tel:+46736246223"
          class="text-blue-600 hover:underline">0736246223</a
        >
      </p>
      <p>
        Du kan också följa mig på <a
          href="https://www.linkedin.com/in/julius-djudjaku/"
          class="text-blue-600 hover:underline">LinkedIn</a
        >
      </p>
    </div>
  </div>
</section>

<script>
  const form: any = document.getElementById("contact-form");
  const thanks: any = document.getElementById("thank-you");

  form.addEventListener("submit", async (e: Event) => {
    e.preventDefault(); // hindra default redirect

    const data = new FormData(form);

    try {
      const response = await fetch(form.action, {
        method: "POST",
        body: data,
        headers: {
          Accept: "application/json", // viktigt! annars behandlas det inte korrekt
        },
      });

      if (response.ok) {
        form.reset(); // töm formulär
        form.classList.add("hidden");
        thanks.classList.remove("hidden"); // visa tack-meddelande
      } else {
        const result = await response.json();
        alert(result.error || "Oj! Något gick fel, försök igen.");
      }
    } catch (error) {
      alert("Oj! Något gick fel, försök igen.");
      console.error(error);
    }
  });
</script>
